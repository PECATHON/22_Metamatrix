<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>Campus Food Hub - Vendor Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script><!-- Canva SDKs -->
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
    }
    /* Custom scrollbar for nicer look */
    .custom-scrollbar::-webkit-scrollbar {
      width: 6px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
      background: transparent;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background-color: rgba(0, 0, 0, 0.2);
      border-radius: 9999px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full m-0 p-0"><!-- App Wrapper -->
  <div id="app-root" class="h-full flex flex-col bg-purple-50 text-purple-900"><!-- Header -->
   <header class="w-full border-b border-purple-200 bg-white/90 backdrop-blur-sm shadow-sm">
    <nav class="max-w-5xl mx-auto flex items-center justify-between py-3 px-4">
     <h1 id="header_title" class="flex items-center gap-2 text-lg font-bold tracking-tight text-purple-900">üçî <span>Campus Food Hub - Vendor</span></h1>
     <div class="flex items-center gap-4 text-sm"><span id="welcome_text" class="text-purple-700 font-medium"> Welcome, Vendor </span> <button id="logout_btn" type="button" class="px-3 py-1.5 rounded-full text-xs font-medium bg-pink-500 hover:bg-pink-400 text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-pink-400 focus-visible:ring-offset-white transition-colors shadow-sm"> Logout </button>
     </div>
    </nav>
   </header><!-- Main Layout -->
   <main class="flex-1">
    <div class="max-w-5xl mx-auto h-full flex py-4 px-4 gap-4"><!-- Sidebar -->
     <aside aria-label="Vendor navigation" class="w-52 min-w-[12rem] bg-white border border-purple-200 rounded-2xl p-3 flex flex-col gap-2 shadow-lg">
      <h2 class="text-xs font-semibold uppercase tracking-[0.18em] text-purple-400 px-1 mb-1">Dashboard</h2><button type="button" data-section-target="menu" class="menu-tab group flex items-center gap-2 px-3 py-2 text-sm rounded-xl bg-purple-500 text-white font-medium shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white"> <span>üçï</span><span>Manage Menu</span> </button> <button type="button" data-section-target="vendorOrders" class="menu-tab group flex items-center gap-2 px-3 py-2 text-sm rounded-xl text-purple-700 hover:bg-purple-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white"> <span>üì¶</span><span>Orders</span> </button> <button type="button" data-section-target="vendorReviews" class="menu-tab group flex items-center gap-2 px-3 py-2 text-sm rounded-xl text-purple-700 hover:bg-purple-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white"> <span>‚≠ê</span><span>Reviews</span> </button> <button type="button" data-section-target="profile" class="menu-tab group flex items-center gap-2 px-3 py-2 text-sm rounded-xl text-purple-700 hover:bg-purple-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white mt-1"> <span>üë§</span><span>Profile</span> </button>
     </aside><!-- Content Area -->
     <section aria-label="Vendor dashboard content" class="flex-1 bg-white border border-purple-200 rounded-2xl p-4 overflow-hidden flex flex-col gap-4 shadow-lg"><!-- Manage Menu -->
      <section id="menu" class="content-section flex-1 flex flex-col gap-4">
       <header class="flex items-center justify-between gap-3">
        <div>
         <h2 id="menu_heading" class="text-base font-bold tracking-tight text-purple-900">Manage Menu</h2>
         <p id="menu_subtitle" class="text-xs text-purple-600 mt-1">Add, edit, or remove items from your food list.</p>
        </div><button id="add_item_toggle" type="button" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium bg-purple-500 hover:bg-purple-400 text-white shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-purple-400 focus-visible:ring-offset-white"> <span>Ôºã</span><span>Add New Item</span> </button>
       </header><!-- Add Item Form -->
       <form id="add_item_form" class="hidden border border-purple-200 rounded-2xl bg-purple-50 px-4 py-4 flex flex-col gap-3 text-sm shadow-sm" aria-label="Add food item">
        <div class="flex flex-wrap gap-3">
         <div class="flex-1 min-w-[10rem]"><label for="item_name" class="block text-xs font-medium text-purple-700 mb-1"> Item Name </label> <input id="item_name" name="item_name" type="text" required class="w-full px-3 py-2 rounded-xl bg-white border border-purple-300 text-purple-900 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400" placeholder="e.g. Veg Cheese Sandwich">
         </div>
         <div class="w-32"><label for="item_price" class="block text-xs font-medium text-purple-700 mb-1"> Price (‚Çπ) </label> <input id="item_price" name="item_price" type="number" required min="1" step="1" class="w-full px-3 py-2 rounded-xl bg-white border border-purple-300 text-purple-900 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400" placeholder="80">
         </div>
         <div class="w-40"><label for="item_category" class="block text-xs font-medium text-purple-700 mb-1"> Category </label> <select id="item_category" name="item_category" required class="w-full px-3 py-2 rounded-xl bg-white border border-purple-300 text-purple-900 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400"> <option value="">Select</option> <option value="Snacks">Snacks</option> <option value="Meals">Meals</option> <option value="Beverages">Beverages</option> <option value="Desserts">Desserts</option> </select>
         </div>
        </div>
        <div><label for="item_photo" class="block text-xs font-medium text-purple-700 mb-1"> Item Photo (Optional) </label>
         <div class="flex items-center gap-3"><label for="item_photo" class="cursor-pointer inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-purple-100 hover:bg-purple-200 border border-purple-300 text-purple-700 text-xs font-medium focus-within:outline-none focus-within:ring-2 focus-within:ring-purple-400 transition-colors"> <span>üì∑</span><span>Choose Photo</span> <input id="item_photo" name="item_photo" type="file" accept="image/*" class="hidden"> </label>
          <div id="photo_preview_container" class="hidden flex items-center gap-2">
           <div class="relative"><img id="photo_preview" src="" alt="Preview" class="w-16 h-16 rounded-lg object-cover border-2 border-purple-300"> <button type="button" id="remove_photo" class="absolute -top-1 -right-1 w-5 h-5 rounded-full bg-pink-500 text-white text-xs flex items-center justify-center hover:bg-pink-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-400"> √ó </button>
           </div><span id="photo_name" class="text-xs text-purple-600 max-w-[200px] truncate"></span>
          </div>
         </div>
        </div>
        <div><label for="item_description" class="block text-xs font-medium text-purple-700 mb-1"> Description </label> <textarea id="item_description" name="item_description" rows="2" class="w-full px-3 py-2 rounded-xl bg-white border border-purple-300 text-purple-900 text-sm resize-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400" placeholder="Short flavor description (optional)"></textarea>
        </div>
        <div class="flex justify-end gap-2 pt-1"><button type="button" id="cancel_add_item" class="px-3 py-1.5 rounded-full text-xs font-medium border border-purple-300 text-purple-700 hover:bg-purple-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white"> Cancel </button> <button type="submit" class="px-3 py-1.5 rounded-full text-xs font-medium bg-purple-500 hover:bg-purple-400 text-white shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-purple-400 focus-visible:ring-offset-white"> Add Item </button>
        </div>
        <p id="form_message" class="text-xs text-purple-600 mt-1 hidden"></p>
       </form><!-- Menu List -->
       <div class="flex-1 min-h-0">
        <div class="flex items-center justify-between mb-2">
         <h3 class="text-xs font-semibold uppercase tracking-[0.16em] text-slate-400">Your Items</h3>
         <p id="menu_count" class="text-[11px] text-slate-400">0 items</p>
        </div>
        <div id="vendor_menu_list" class="custom-scrollbar h-full max-h-[100%] overflow-y-auto space-y-3 pr-1 text-sm">
         <p class="text-xs text-slate-400">No items yet. Use ‚ÄúAdd New Item‚Äù to start building your menu.</p>
        </div>
       </div>
      </section><!-- Orders -->
      <section id="vendorOrders" class="content-section hidden flex-1 flex flex-col gap-3">
       <header class="flex items-center justify-between gap-3">
        <div>
         <h2 id="orders_heading" class="text-base font-bold tracking-tight text-purple-900">Incoming Orders</h2>
         <p id="orders_subtitle" class="text-xs text-purple-600 mt-1">Orders from students will appear here when connected.</p>
        </div>
       </header>
       <div class="flex-1 min-h-0">
        <div id="vendor_orders_list" class="custom-scrollbar h-full overflow-y-auto space-y-3 pr-1 text-sm flex items-center justify-center">
         <div class="text-center py-8">
          <div class="text-4xl mb-3">
           üì¶
          </div>
          <p class="text-sm font-medium text-purple-900 mb-1">No Orders Yet</p>
          <p class="text-xs text-purple-600">Orders will appear here when students place them</p>
         </div>
        </div>
       </div>
      </section><!-- Reviews -->
      <section id="vendorReviews" class="content-section hidden flex-1 flex flex-col gap-3">
       <header class="flex items-center justify-between gap-3">
        <div>
         <h2 id="reviews_heading" class="text-base font-bold tracking-tight text-purple-900">Customer Reviews</h2>
         <p id="reviews_subtitle" class="text-xs text-purple-600 mt-1">See what students are saying about your food. (Demo reviews)</p>
        </div>
       </header>
       <div class="flex-1 min-h-0">
        <div id="vendor_reviews_list" class="custom-scrollbar h-full overflow-y-auto space-y-3 pr-1 text-sm flex items-center justify-center">
         <div class="text-center py-8">
          <div class="text-4xl mb-3">
           ‚≠ê
          </div>
          <p class="text-sm font-medium text-purple-900 mb-1">No Reviews Yet</p>
          <p class="text-xs text-purple-600">Customer reviews will appear here when students submit them</p>
         </div>
        </div>
       </div>
      </section><!-- Profile -->
      <section id="profile" class="content-section hidden flex-1 flex flex-col gap-4">
       <header class="flex items-center justify-between gap-3">
        <div>
         <h2 id="profile_heading" class="text-base font-bold tracking-tight text-purple-900">Vendor Profile</h2>
         <p id="profile_subtitle" class="text-xs text-purple-600 mt-1">Basic information visible to students when they view your stall.</p>
        </div><button id="edit_profile_btn" type="button" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium bg-purple-500 hover:bg-purple-400 text-white shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-purple-400 focus-visible:ring-offset-white"> <span>‚úèÔ∏è</span><span>Edit Profile</span> </button>
       </header><!-- Profile Display -->
       <div id="profile_display" class="border border-purple-200 rounded-2xl bg-purple-50 px-4 py-4 text-sm space-y-2 shadow-sm">
        <p><span class="font-medium text-purple-900">Vendor Name:</span> <span id="profile_name" class="text-purple-700"> Campus Food Hub Partner </span></p>
        <p><span class="font-medium text-purple-900">Contact:</span> <span id="profile_contact" class="text-purple-700"> +91-XXXXXXXXXX </span></p>
        <p><span class="font-medium text-purple-900">Location:</span> <span id="profile_location" class="text-purple-700"> Campus Cafeteria </span></p>
       </div><!-- Profile Edit Form -->
       <form id="profile_edit_form" class="hidden border border-purple-200 rounded-2xl bg-purple-50 px-4 py-4 flex flex-col gap-3 text-sm shadow-sm" aria-label="Edit vendor profile">
        <div><label for="edit_vendor_name" class="block text-xs font-medium text-purple-700 mb-1"> Vendor Name </label> <input id="edit_vendor_name" name="edit_vendor_name" type="text" required class="w-full px-3 py-2 rounded-xl bg-white border border-purple-300 text-purple-900 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400" placeholder="Your business name">
        </div>
        <div><label for="edit_vendor_contact" class="block text-xs font-medium text-purple-700 mb-1"> Contact Number </label> <input id="edit_vendor_contact" name="edit_vendor_contact" type="tel" required class="w-full px-3 py-2 rounded-xl bg-white border border-purple-300 text-purple-900 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400" placeholder="+91-XXXXXXXXXX">
        </div>
        <div><label for="edit_vendor_location" class="block text-xs font-medium text-purple-700 mb-1"> Location </label> <input id="edit_vendor_location" name="edit_vendor_location" type="text" required class="w-full px-3 py-2 rounded-xl bg-white border border-purple-300 text-purple-900 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400" placeholder="Your stall location">
        </div>
        <div class="flex justify-end gap-2 pt-1"><button type="button" id="cancel_edit_profile" class="px-3 py-1.5 rounded-full text-xs font-medium border border-purple-300 text-purple-700 hover:bg-purple-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white"> Cancel </button> <button type="submit" class="px-3 py-1.5 rounded-full text-xs font-medium bg-purple-500 hover:bg-purple-400 text-white shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-purple-400 focus-visible:ring-offset-white"> Save Changes </button>
        </div>
       </form>
      </section>
     </section>
    </div>
   </main><!-- Toast -->
   <div id="toast" class="pointer-events-none fixed inset-x-0 bottom-4 flex justify-center px-4" aria-live="polite">
    <div id="toast_inner" class="hidden max-w-sm w-full bg-purple-900 text-white text-xs rounded-full px-4 py-2 border border-purple-700 shadow-lg flex items-center justify-between gap-2"><span id="toast_message"></span> <button id="toast_close" type="button" class="text-[10px] font-medium text-purple-200 hover:text-white focus-visible:outline-none"> Close </button>
    </div>
   </div>
  </div>
  <script>
    // --------- CONFIG & SDK SETUP ----------
    const defaultConfig = {
      header_title: "Campus Food Hub - Vendor",
      welcome_text: "Welcome, Vendor",
      menu_heading: "Manage Menu",
      menu_subtitle: "Add, edit, or remove items from your food list.",
      orders_heading: "Incoming Orders",
      orders_subtitle: "Orders from students will appear here when connected.",
      reviews_heading: "Customer Reviews",
      reviews_subtitle: "Customer reviews will appear here when students submit them.",
      profile_heading: "Vendor Profile",
      profile_subtitle: "Basic information visible to students when they view your stall.",
      profile_name: "Campus Food Hub Partner",
      profile_contact: "+91-XXXXXXXXXX",
      profile_location: "Campus Cafeteria",
      // Colors (5 total) - White & Purple playful theme
      background_color: "#faf5ff",     // purple-50 (light lavender white)
      surface_color: "#ffffff",        // pure white cards
      text_color: "#581c87",           // purple-900 (deep purple text)
      primary_action_color: "#a855f7", // purple-500 (vibrant purple)
      secondary_action_color: "#ec4899", // pink-500 (playful pink accent)
      font_family: "system-ui",
      font_size: 14
    };

    function applyConfig(config) {
      const merged = Object.assign({}, defaultConfig, config || {});
      const root = document.getElementById("app-root");

      // Colors
      root.style.backgroundColor = merged.background_color;

      const cards = root.querySelectorAll(
        "header, aside, section[aria-label], .border, .rounded-2xl, .bg-slate-900\\/70, .bg-slate-950\\/60"
      );
      cards.forEach(el => {
        el.style.backgroundColor = "";
      });
      // Apply surface to main card areas
      const surfaces = root.querySelectorAll(
        "aside, section[aria-label], .border.rounded-2xl"
      );
      surfaces.forEach(el => {
        el.style.backgroundColor = merged.surface_color;
      });

      root.style.color = merged.text_color;

      // Primary buttons
      const primaryButtons = root.querySelectorAll(
        "#add_item_toggle, form#add_item_form button[type='submit'], #edit_profile_btn, form#profile_edit_form button[type='submit']"
      );
      primaryButtons.forEach(btn => {
        btn.style.backgroundColor = merged.primary_action_color;
        btn.style.color = "#ffffff";
      });

      // Secondary / destructive actions
      const secondaryButtons = root.querySelectorAll("#logout_btn");
      secondaryButtons.forEach(btn => {
        btn.style.backgroundColor = merged.secondary_action_color;
        btn.style.color = "#ffffff";
      });

      // Font family & size
      const baseFont = merged.font_family + ", system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif";
      const baseSize = merged.font_size || 14;
      root.style.fontFamily = baseFont;

      // Scale text
      const titleEls = root.querySelectorAll("h1,h2");
      titleEls.forEach(el => {
        el.style.fontSize = (baseSize * 1.4) + "px";
      });
      const subtitleEls = root.querySelectorAll("p.text-xs, #menu_subtitle, #orders_subtitle, #reviews_subtitle, #profile_subtitle");
      subtitleEls.forEach(el => {
        el.style.fontSize = (baseSize * 0.9) + "px";
      });
      const bodyEls = root.querySelectorAll("p, span, button, input, select, textarea, label, h3");
      bodyEls.forEach(el => {
        if (!el.style.fontSize) {
          el.style.fontSize = baseSize + "px";
        }
        el.style.fontFamily = baseFont;
      });

      // Update texts
      const setText = (id, value) => {
        const el = document.getElementById(id);
        if (el && typeof value === "string") el.textContent = value;
      };

      setText("header_title", merged.header_title);
      setText("welcome_text", merged.welcome_text);
      setText("menu_heading", merged.menu_heading);
      setText("menu_subtitle", merged.menu_subtitle);
      setText("orders_heading", merged.orders_heading);
      setText("orders_subtitle", merged.orders_subtitle);
      setText("reviews_heading", merged.reviews_heading);
      setText("reviews_subtitle", merged.reviews_subtitle);
      setText("profile_heading", merged.profile_heading);
      setText("profile_subtitle", merged.profile_subtitle);
      setText("profile_name", merged.profile_name);
      setText("profile_contact", merged.profile_contact);
      setText("profile_location", merged.profile_location);
    }

    (function initElementSdk() {
      if (!window.elementSdk) {
        // Canva environment only; in plain browser this will just use defaults.
        applyConfig(defaultConfig);
        return;
      }

      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (config) => {
          applyConfig(config);
        },
        mapToCapabilities: (config) => {
          const current = config || defaultConfig;
          return {
            recolorables: [
              {
                get: () => current.background_color || defaultConfig.background_color,
                set: (value) => {
                  current.background_color = value;
                  window.elementSdk.setConfig({ background_color: value });
                }
              },
              {
                get: () => current.surface_color || defaultConfig.surface_color,
                set: (value) => {
                  current.surface_color = value;
                  window.elementSdk.setConfig({ surface_color: value });
                }
              },
              {
                get: () => current.text_color || defaultConfig.text_color,
                set: (value) => {
                  current.text_color = value;
                  window.elementSdk.setConfig({ text_color: value });
                }
              },
              {
                get: () => current.primary_action_color || defaultConfig.primary_action_color,
                set: (value) => {
                  current.primary_action_color = value;
                  window.elementSdk.setConfig({ primary_action_color: value });
                }
              },
              {
                get: () => current.secondary_action_color || defaultConfig.secondary_action_color,
                set: (value) => {
                  current.secondary_action_color = value;
                  window.elementSdk.setConfig({ secondary_action_color: value });
                }
              }
            ],
            borderables: [],
            fontEditable: {
              get: () => current.font_family || defaultConfig.font_family,
              set: (value) => {
                current.font_family = value;
                window.elementSdk.setConfig({ font_family: value });
              }
            },
            fontSizeable: {
              get: () => current.font_size || defaultConfig.font_size,
              set: (value) => {
                current.font_size = value;
                window.elementSdk.setConfig({ font_size: value });
              }
            }
          };
        },
        mapToEditPanelValues: (config) => {
          const c = Object.assign({}, defaultConfig, config || {});
          return new Map([
            ["header_title", c.header_title],
            ["welcome_text", c.welcome_text],
            ["menu_heading", c.menu_heading],
            ["menu_subtitle", c.menu_subtitle],
            ["orders_heading", c.orders_heading],
            ["orders_subtitle", c.orders_subtitle],
            ["reviews_heading", c.reviews_heading],
            ["reviews_subtitle", c.reviews_subtitle],
            ["profile_heading", c.profile_heading],
            ["profile_subtitle", c.profile_subtitle],
            ["profile_name", c.profile_name],
            ["profile_contact", c.profile_contact],
            ["profile_location", c.profile_location]
          ]);
        }
      });
    })();

    // --------- INTERACTIVITY (MENU, FORM, TABS, TOAST) ----------

    const sections = ["menu", "vendorOrders", "vendorReviews", "profile"];

    function showSection(id) {
      sections.forEach(sec => {
        const el = document.getElementById(sec);
        if (el) el.classList.toggle("hidden", sec !== id);
      });
      const tabs = document.querySelectorAll(".menu-tab");
      tabs.forEach(tab => {
        const target = tab.getAttribute("data-section-target");
        if (target === id) {
          tab.classList.add("bg-slate-800", "text-slate-50", "font-medium", "shadow-sm", "ring-1", "ring-slate-700");
        } else {
          tab.classList.remove("bg-slate-800", "text-slate-50", "font-medium", "shadow-sm", "ring-1", "ring-slate-700");
        }
      });
    }

    function setupTabs() {
      const tabs = document.querySelectorAll(".menu-tab");
      tabs.forEach(tab => {
        tab.addEventListener("click", () => {
          const target = tab.getAttribute("data-section-target");
          showSection(target);
        });
      });
      // default
      showSection("menu");
    }

    function setupForm() {
      const toggleBtn = document.getElementById("add_item_toggle");
      const form = document.getElementById("add_item_form");
      const cancelBtn = document.getElementById("cancel_add_item");
      const messageEl = document.getElementById("form_message");
      const photoInput = document.getElementById("item_photo");
      const photoPreview = document.getElementById("photo_preview");
      const photoPreviewContainer = document.getElementById("photo_preview_container");
      const photoName = document.getElementById("photo_name");
      const removePhotoBtn = document.getElementById("remove_photo");

      let currentPhotoData = null;

      function openForm() {
        form.classList.remove("hidden");
        messageEl.classList.add("hidden");
        form.scrollIntoView({ behavior: "smooth", block: "nearest" });
      }
      function closeForm() {
        form.classList.add("hidden");
        messageEl.classList.add("hidden");
        form.reset();
        currentPhotoData = null;
        photoPreviewContainer.classList.add("hidden");
      }

      // Handle photo upload
      photoInput.addEventListener("change", (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (event) => {
            currentPhotoData = event.target.result;
            photoPreview.src = currentPhotoData;
            photoName.textContent = file.name;
            photoPreviewContainer.classList.remove("hidden");
          };
          reader.readAsDataURL(file);
        }
      });

      // Remove photo
      removePhotoBtn.addEventListener("click", () => {
        currentPhotoData = null;
        photoInput.value = "";
        photoPreviewContainer.classList.add("hidden");
      });

      toggleBtn.addEventListener("click", openForm);
      cancelBtn.addEventListener("click", closeForm);

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.getElementById("item_name").value.trim();
        const price = document.getElementById("item_price").value.trim();
        const category = document.getElementById("item_category").value;
        const desc = document.getElementById("item_description").value.trim();

        if (!name || !price || !category) {
          showToast("Please fill in required fields.");
          return;
        }

        addMenuItemCard({ name, price, category, desc, photo: currentPhotoData });
        updateMenuCount();
        messageEl.textContent = "Item added to your menu (demo only).";
        messageEl.classList.remove("hidden");
        showToast("Menu item added.");
        form.reset();
        currentPhotoData = null;
        photoPreviewContainer.classList.add("hidden");
      });
    }

    function addMenuItemCard({ name, price, category, desc, photo }) {
      const list = document.getElementById("vendor_menu_list");
      const emptyText = list.querySelector("p.text-xs");
      if (emptyText) emptyText.remove();

      const card = document.createElement("article");
      card.className = "border border-purple-200 rounded-2xl bg-purple-50 px-4 py-3 flex gap-3 shadow-sm";

      // Photo section (if photo exists)
      if (photo) {
        const photoContainer = document.createElement("div");
        photoContainer.className = "flex-shrink-0";
        const photoImg = document.createElement("img");
        photoImg.src = photo;
        photoImg.alt = name;
        photoImg.className = "w-20 h-20 rounded-xl object-cover border-2 border-purple-300";
        photoContainer.appendChild(photoImg);
        card.appendChild(photoContainer);
      }

      // Content section
      const contentSection = document.createElement("div");
      contentSection.className = "flex-1 flex flex-col gap-1.5";

      const top = document.createElement("div");
      top.className = "flex items-center justify-between gap-2";

      const left = document.createElement("div");
      const title = document.createElement("h3");
      title.className = "text-sm font-medium text-purple-900";
      title.textContent = name;
      const cat = document.createElement("p");
      cat.className = "text-[11px] text-purple-600";
      cat.textContent = category;
      left.appendChild(title);
      left.appendChild(cat);

      const right = document.createElement("div");
      right.className = "flex items-center gap-2";
      const priceEl = document.createElement("span");
      priceEl.className = "text-sm font-semibold text-purple-700";
      priceEl.textContent = "‚Çπ" + price;
      const removeBtn = document.createElement("button");
      removeBtn.type = "button";
      removeBtn.className = "px-2 py-1 rounded-full text-[11px] border border-purple-300 text-purple-700 hover:bg-purple-100 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white";
      removeBtn.textContent = "Remove";
      removeBtn.addEventListener("click", () => {
        list.removeChild(card);
        updateMenuCount();
        showToast("Item removed (demo).");
      });
      right.appendChild(priceEl);
      right.appendChild(removeBtn);

      top.appendChild(left);
      top.appendChild(right);
      contentSection.appendChild(top);

      if (desc) {
        const descEl = document.createElement("p");
        descEl.className = "text-xs text-purple-700 mt-1";
        descEl.textContent = desc;
        contentSection.appendChild(descEl);
      }

      card.appendChild(contentSection);
      list.appendChild(card);
    }

    function updateMenuCount() {
      const list = document.getElementById("vendor_menu_list");
      const items = list.querySelectorAll("article");
      const countEl = document.getElementById("menu_count");
      const n = items.length;
      countEl.textContent = n + (n === 1 ? " item" : " items");
    }

    function setupLogout() {
      const btn = document.getElementById("logout_btn");
      btn.addEventListener("click", () => {
        showToast("Logout is just a demo here.");
      });
    }

    function setupProfileEdit() {
      const editBtn = document.getElementById("edit_profile_btn");
      const profileDisplay = document.getElementById("profile_display");
      const profileForm = document.getElementById("profile_edit_form");
      const cancelBtn = document.getElementById("cancel_edit_profile");

      const nameInput = document.getElementById("edit_vendor_name");
      const contactInput = document.getElementById("edit_vendor_contact");
      const locationInput = document.getElementById("edit_vendor_location");

      const nameDisplay = document.getElementById("profile_name");
      const contactDisplay = document.getElementById("profile_contact");
      const locationDisplay = document.getElementById("profile_location");

      function openEditForm() {
        nameInput.value = nameDisplay.textContent.trim();
        contactInput.value = contactDisplay.textContent.trim();
        locationInput.value = locationDisplay.textContent.trim();
        profileDisplay.classList.add("hidden");
        profileForm.classList.remove("hidden");
      }

      function closeEditForm() {
        profileDisplay.classList.remove("hidden");
        profileForm.classList.add("hidden");
      }

      editBtn.addEventListener("click", openEditForm);
      cancelBtn.addEventListener("click", closeEditForm);

      profileForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const newName = nameInput.value.trim();
        const newContact = contactInput.value.trim();
        const newLocation = locationInput.value.trim();

        if (!newName || !newContact || !newLocation) {
          showToast("Please fill in all fields.");
          return;
        }

        nameDisplay.textContent = newName;
        contactDisplay.textContent = newContact;
        locationDisplay.textContent = newLocation;

        // Update config if using Element SDK
        if (window.elementSdk) {
          window.elementSdk.setConfig({
            profile_name: newName,
            profile_contact: newContact,
            profile_location: newLocation
          });
        }

        showToast("Profile updated successfully!");
        closeEditForm();
      });
    }

    function showToast(message) {
      const inner = document.getElementById("toast_inner");
      const msgEl = document.getElementById("toast_message");
      const closeBtn = document.getElementById("toast_close");
      msgEl.textContent = message;
      inner.classList.remove("hidden");
      let hideTimeout = setTimeout(hide, 2500);

      function hide() {
        inner.classList.add("hidden");
      }

      closeBtn.onclick = () => {
        clearTimeout(hideTimeout);
        hide();
      };
    }

    // Orders section ready for future integration
    // When you connect this to your student ordering page, you can add orders dynamically:
    // Example function to add an order (call this when receiving order data):
    function addOrderToList(orderData) {
      const ordersList = document.getElementById("vendor_orders_list");
      
      // Remove empty state if it exists
      const emptyState = ordersList.querySelector(".text-center");
      if (emptyState) {
        ordersList.innerHTML = "";
        ordersList.classList.remove("flex", "items-center", "justify-center");
      }

      const card = document.createElement("article");
      card.className = "border border-purple-200 rounded-2xl bg-purple-50 px-4 py-3 flex flex-col gap-2 shadow-sm";
      card.dataset.orderId = orderData.id;

      const topRow = document.createElement("div");
      topRow.className = "flex items-center justify-between";

      const leftInfo = document.createElement("div");
      const orderTitle = document.createElement("h3");
      orderTitle.className = "text-sm font-medium text-purple-900";
      orderTitle.textContent = `Order #${orderData.id}`;
      const orderItems = document.createElement("p");
      orderItems.className = "text-xs text-purple-700";
      orderItems.textContent = orderData.items;
      leftInfo.appendChild(orderTitle);
      leftInfo.appendChild(orderItems);

      const statusBadge = document.createElement("span");
      statusBadge.className = "text-xs px-2 py-1 rounded-full bg-amber-100 text-amber-700 border border-amber-300 font-medium";
      statusBadge.textContent = "Pending";

      topRow.appendChild(leftInfo);
      topRow.appendChild(statusBadge);

      const bottomRow = document.createElement("div");
      bottomRow.className = "flex items-center justify-between";

      const timePrice = document.createElement("p");
      timePrice.className = "text-xs text-purple-600";
      timePrice.textContent = `Placed ${orderData.time} ‚Ä¢ ${orderData.price}`;

      const actionBtn = document.createElement("button");
      actionBtn.type = "button";
      actionBtn.className = "px-3 py-1 rounded-full text-[11px] font-medium bg-purple-500 hover:bg-purple-400 text-white shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white";
      actionBtn.textContent = "Mark Complete";
      actionBtn.addEventListener("click", () => {
        statusBadge.className = "text-xs px-2 py-1 rounded-full bg-green-100 text-green-700 border border-green-300 font-medium";
        statusBadge.textContent = "Completed";
        actionBtn.remove();
        showToast(`Order #${orderData.id} marked as completed!`);
        // Here you can add code to notify the student page that order is complete
      });

      bottomRow.appendChild(timePrice);
      bottomRow.appendChild(actionBtn);

      card.appendChild(topRow);
      card.appendChild(bottomRow);
      ordersList.appendChild(card);
    }

    document.addEventListener("DOMContentLoaded", () => {
      applyConfig(defaultConfig);
      setupTabs();
      setupForm();
      setupLogout();
      setupProfileEdit();
      updateMenuCount();
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a1a62d3e333c0e2',t:'MTc2MzY2NzI4MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>